import{S as l}from"./sweetalert2.all-558fd36d.js";import{_ as p,r as h,o as f,c as g,d as w,b as e,p as _,g as c,k as u,F as v}from"./index-d38fc3ca.js";const{VITE_URL:d}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"artworld",BASE_URL:"/artworld/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},b={data(){return{user:{username:"",password:""},isProcessing:!1,status:!1,isLoading:!1}},methods:{login(){this.isProcessing=!0;const i=`${d}/v2/admin/signin`;this.$http.post(i,this.user).then(s=>{const{expired:r,token:n}=s.data;document.cookie=`hexschool=${n}; expires=${new Date(r)}`,this.$router.push("/admin/courses"),l.fire({position:"top-end",icon:"success",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:"登入成功！",showConfirmButton:!1,timer:800,timerProgressBar:!0,toast:!0})}).catch(s=>{l.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${s.response.data.message}`,showConfirmButton:!1,timer:800,timerProgressBar:!0,toast:!0}),this.isProcessing=!1,this.user={}})},checkLogin(){const i=document.cookie.replace(/(?:(?:^|.*;\s*)hexschool\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=i;const s=`${d}/v2/api/user/check`;this.$http.post(s).then(()=>{this.status=!0,this.$router.push("/admin/courses")}).catch(r=>{console.log(r)})}},mounted(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},800),this.checkLogin()}},L={class:"container login d-flex justify-content-center align-items-center"},x={class:"row py-5"},V=e("h3",{class:"mb-3 my-4 text-center"}," 登入會員 ",-1),k={class:"form-floating mb-3"},P=e("label",{for:"username"},"Email address",-1),B={class:"form-floating"},E=e("label",{for:"password"},"Password",-1),$=["disabled"];function y(i,s,r,n,o,a){const m=h("VueLoading");return f(),g(v,null,[w(m,{active:o.isLoading,"onUpdate:active":s[0]||(s[0]=t=>o.isLoading=t)},null,8,["active"]),e("div",L,[e("div",x,[V,e("div",null,[e("form",{id:"form",class:"form-signin",onSubmit:s[3]||(s[3]=_((...t)=>a.login&&a.login(...t),["prevent"]))},[e("div",k,[c(e("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=t=>o.user.username=t),class:"form-control",id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[u,o.user.username]]),P]),e("div",B,[c(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=t=>o.user.password=t),class:"form-control",id:"password",placeholder:"Password",required:""},null,512),[[u,o.user.password]]),E]),e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit",disabled:o.isProcessing}," 登入 ",8,$)],32)])])])],64)}const T=p(b,[["render",y]]);export{T as default};
