import{_ as k,m as w,a as T,r as _,o as l,c,d as n,b as s,w as p,t as e,F as h,z as m,n as b,A as L,e as a}from"./index-edf686f4.js";import{c as g}from"./cart-5cd49c78.js";import{S as f}from"./sweetalert2.all-e9ed28ba.js";const{VITE_URL:v,VITE_PATH:y}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"artworld",BASE_URL:"/artworld/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},P={data(){return{product:{},isLoading:!1,tempUrl:"",category:"",moreProduct:[]}},computed:{...w(g,["isDone"])},methods:{getProduct(){const{id:r}=this.$route.params,i=`${v}/v2/api/${y}/product/${r}`;this.$http.get(i).then(d=>{this.product=d.data.product,this.tempUrl=d.data.product.imageUrl,this.isLoading=!1,this.category=this.product.category,this.getCategory()}).catch(d=>{f.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${d.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:1e3,timerProgressBar:!0,toast:!0}),this.$router.push("/courses")})},getCategory(){this.$http.get(`${v}/v2/api/${y}/products?category=${this.category}`).then(r=>{let i="";i=r.data.products,i=i.reverse(),i.forEach(d=>{d.id!==this.product.id&&this.moreProduct.push(d)}),this.moreProduct=this.moreProduct.splice(0,3),this.isLoading=!1}).catch(r=>{f.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${r.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:1e3,timerProgressBar:!1,toast:!0})})},...T(g,["addToCart","numberComma"])},mounted(){this.isLoading=!0,this.getProduct()}},x={class:"container py-5"},V={class:"mb-4",style:{"`--bs-breadcrumb-divider":">"},"aria-label":"breadcrumb"},U={class:"breadcrumb"},N={class:"breadcrumb-item"},E={class:"breadcrumb-item"},B={class:"breadcrumb-item active","aria-current":"page"},S={class:"row"},D={class:"col-xl-8"},R=["src"],A=["src","onClick"],q={class:"col-xl-4 mt-4 mt-xl-0 px-5 px-xl-3"},I={class:"d-flex align-items-center"},H={class:"mb-0 me-4"},z={class:"badge bg-dark p-2"},F={class:"table table-borderless mt-4"},O=s("td",null,[s("i",{class:"bi bi-clock me-2"})],-1),$=s("td",null,[s("i",{class:"bi bi-people-fill me-2"})],-1),j=s("td",null,[s("i",{class:"bi bi-card-list me-2"})],-1),M=s("td",null,[s("i",{class:"bi bi-exclamation-square-fill me-2"})],-1),G=s("td",null,null,-1),J={key:0,class:"h5"},K={key:1,class:"mb-3"},Q={class:"h6"},W={class:"h5"},X={class:"mt-4 d-flex"},Y={class:"d-none d-lg-block"},Z={key:0,class:"fs-5 mt-5 pt-5 mb-4 border-top"},ss={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xxl-4 g-4"},ts={class:"overflow-hidden",style:{height:"180px"}},os={class:"card-title h5"},es=["src"],rs={class:"card-body"},is={class:"d-flex justify-content-between mb-2"},ls={class:"badge bg-dark p-2 mb-0"},cs={class:"mb-1 h6"},ds=s("i",{class:"bi bi-clock me-2"},null,-1),ns={class:"h6"},as=s("i",{class:"bi bi-people-fill me-2"},null,-1),us={key:0,class:"h5 mt-2"},ps={key:1,class:"my-2"},hs={class:"h6"},_s={class:"h5"};function ms(r,i,d,bs,o,gs){const C=_("VueLoading"),u=_("RouterLink");return l(),c(h,null,[n(C,{active:o.isLoading,"onUpdate:active":i[0]||(i[0]=t=>o.isLoading=t)},null,8,["active"]),s("div",x,[s("nav",V,[s("ol",U,[s("li",N,[n(u,{to:"/"},{default:p(()=>[a("Home")]),_:1})]),s("li",E,[n(u,{to:"/courses"},{default:p(()=>[a("課程列表")]),_:1})]),s("li",B,e(o.product.title),1)])]),s("div",S,[s("div",D,[s("img",{class:"w-100",src:o.tempUrl,alt:"課程圖片",style:{height:"460px"}},null,8,R),(l(!0),c(h,null,m(o.product.imagesUrl,t=>(l(),c("img",{key:t,src:t,alt:"",class:"images mt-3 m-2 d-none d-md-inline-block",style:{width:"200px",height:"140px",cursor:"pointer"},onClick:()=>o.tempUrl=t},null,8,A))),128))]),s("div",q,[s("div",I,[s("h3",H,e(o.product.title),1),s("span",z,e(o.product.category),1)]),s("table",F,[s("tbody",null,[s("tr",null,[O,s("td",null,e(o.product.datetime),1)]),s("tr",null,[$,s("td",null,e(o.product.total_quota),1)]),s("tr",null,[j,s("td",null,e(o.product.description),1)]),s("tr",null,[M,s("td",null,e(o.product.content),1)])]),s("tfoot",null,[s("tr",null,[G,s("td",null,[o.product.price===o.product.origin_price?(l(),c("div",J,"NT$ "+e(o.product.price),1)):(l(),c("div",K,[s("del",Q,"原價 NT$ "+e(r.numberComma(o.product.origin_price)),1),s("div",W,"現在只要 NT$ "+e(r.numberComma(o.product.price)),1)]))])])])]),s("div",X,[s("button",{type:"button",class:b([{disabled:r.isDone===o.product.id},"btn btn-dark ms-auto"]),onClick:i[1]||(i[1]=()=>r.addToCart(o.product.id))},"加入購物車",2)])])]),s("div",Y,[o.moreProduct.length!=0?(l(),c("h4",Z,"相關課程")):L("",!0),s("div",ss,[(l(!0),c(h,null,m(o.moreProduct,t=>(l(),c("div",{class:"col position-relative",key:t.id},[n(u,{to:`${t==null?void 0:t.id}`,class:"card h-100 border-primary"},{default:p(()=>[s("div",ts,[s("div",os,[s("img",{src:t.imageUrl,class:"courses__img card-img-top",alt:"課程圖示",style:{height:"180px"}},null,8,es)])]),s("div",rs,[s("div",is,[n(u,{to:`${t==null?void 0:t.id}`,class:"card-title h5 mb-0"},{default:p(()=>[a(e(t==null?void 0:t.title),1)]),_:2},1032,["to"]),s("h6",ls," #"+e(t.category),1)]),s("div",null,[s("p",cs,[ds,a(e(t.datetime),1)]),s("p",ns,[as,a(e(t.total_quota),1)])]),t.price===t.origin_price?(l(),c("div",us,"NT$ "+e(r.numberComma(t.price)),1)):(l(),c("div",ps,[s("del",hs,"原價 NT$ "+e(r.numberComma(t.origin_price)),1),s("div",_s,"特價 NT$ "+e(r.numberComma(t.price)),1)]))])]),_:2},1032,["to"]),s("a",{class:b([{disabled:r.isDone===t.id},"btn btn-outline-primary me-4 mb-3 position-absolute bottom-0 end-0"]),onClick:i[2]||(i[2]=()=>r.addToCart(o.product.id,r.qty))},"加入購物車",2)]))),128))])])])],64)}const Cs=k(P,[["render",ms]]);export{Cs as default};
