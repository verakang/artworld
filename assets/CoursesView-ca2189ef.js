import{_ as k,h as x,m as L,a as P,r as b,o as c,c as m,d,b as t,w as _,n,F as f,i as T,e as u,t as r}from"./index-cf737877.js";import{P as V}from"./PaginationComponent-9e245601.js";import{c as C}from"./cart-2ad75db6.js";import{S as y}from"./sweetalert2.all-b8b31f21.js";const{VITE_URL:g,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"artworld",BASE_URL:"/artworld/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},D={data(){return{products:[],page:{},isLoading:!1,category:""}},components:{RouterLink:x,Pagination:V},computed:{...L(C,["isDone"])},methods:{getData(o=1){let s=`${g}/v2/api/${h}/products/?page=${o}`;this.category!=="全部"&&(s=`${g}/v2/api/${h}/products/?page=${o}&category=${this.category}`),this.$http.get(s).then(l=>{this.products=l.data.products,this.page=l.data.pagination,window.scrollTo(0,0)}).catch(l=>{y.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${l.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:1e3,timerProgressBar:!1,toast:!0})})},getProducts(){this.$http.get(`${g}/v2/api/${h}/products/all`).then(o=>{this.products=o.data.products,this.products=this.products.reverse(),this.isLoading=!1,this.category="全部",this.getData()}).catch(o=>{y.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${o.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:1e3,timerProgressBar:!1,toast:!0})})},setCategory(o){this.$http.get(`${g}/v2/api/${h}/products?category=${o}`).then(s=>{this.products=s.data.products,this.isLoading=!1,this.category=o,this.getData()}).catch(s=>{y.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${s.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:1e3,timerProgressBar:!1,toast:!0})})},...P(C,["addToCart","numberComma"])},mounted(){this.isLoading=!0,this.getData(),this.getProducts()}},$={class:"container py-5"},B={class:"d-lg-flex align-items-center justify-content-between"},E={class:"my-4",style:{"`--bs-breadcrumb-divider":">"},"aria-label":"breadcrumb"},R={class:"breadcrumb"},S={class:"breadcrumb-item"},N=t("li",{class:"breadcrumb-item active","aria-current":"page"},"課程列表",-1),U={class:"list-unstyled d-flex flex-wrap"},A={class:"row row-cols-1 row-cols-lg-2 row-cols-xxl-4 g-4"},I={class:"overflow-hidden",style:{height:"180px"}},H={class:"card-title h5"},j=["src"],q={class:"card-body"},F={class:"d-flex justify-content-between mb-2"},O={class:"badge bg-dark p-2 mb-0"},z={class:"mb-1 h6"},M=t("i",{class:"bi bi-clock me-2"},null,-1),G={class:"h6"},J=t("i",{class:"bi bi-people-fill me-2"},null,-1),K={key:0,class:"h5 mt-2"},Q={key:1,class:"my-2"},W={class:"h6"},X={class:"h5"},Y=["onClick"];function Z(o,s,l,tt,i,a){const w=b("VueLoading"),p=b("RouterLink"),v=b("Pagination");return c(),m(f,null,[d(w,{active:i.isLoading,"onUpdate:active":s[0]||(s[0]=e=>i.isLoading=e)},null,8,["active"]),t("div",$,[t("div",B,[t("nav",E,[t("ol",R,[t("li",S,[d(p,{to:"/"},{default:_(()=>[u("Home")]),_:1})]),N])]),t("ul",U,[t("li",null,[t("button",{class:n(["btn btn-outline-primary btn-sm m-2",{"btn-primary text-white":i.category==="全部"}]),type:"button",onClick:s[1]||(s[1]=()=>a.getProducts())},"全部",2)]),t("li",null,[t("button",{class:n(["btn btn-outline-primary btn-sm m-2",{"btn-primary text-white":i.category==="美術"}]),type:"button",onClick:s[2]||(s[2]=()=>a.setCategory("美術"))},"美術",2)]),t("li",null,[t("button",{class:n(["btn btn-outline-primary btn-sm m-2",{"btn-primary text-white":i.category==="花藝"}]),type:"button",onClick:s[3]||(s[3]=()=>a.setCategory("花藝"))},"花藝",2)]),t("li",null,[t("button",{class:n(["btn btn-outline-primary btn-sm m-2",{"btn-primary text-white":i.category==="生活"}]),type:"button",onClick:s[4]||(s[4]=()=>a.setCategory("生活"))},"生活",2)]),t("li",null,[t("button",{class:n(["btn btn-outline-primary btn-sm m-2",{"btn-primary text-white":i.category==="攝影"}]),type:"button",onClick:s[5]||(s[5]=()=>a.setCategory("攝影"))},"攝影",2)]),t("li",null,[t("button",{class:n(["btn btn-outline-primary btn-sm m-2",{"btn-primary text-white":i.category==="設計"}]),type:"button",onClick:s[6]||(s[6]=()=>a.setCategory("設計"))},"設計",2)])])]),t("div",A,[(c(!0),m(f,null,T(i.products,e=>(c(),m("div",{class:"col position-relative",key:e.id},[d(p,{to:`/course/${e==null?void 0:e.id}`,class:"card h-100 border-primary"},{default:_(()=>[t("div",I,[t("div",H,[t("img",{src:e.imageUrl,class:"courses__img card-img-top",alt:"課程圖示",style:{height:"180px"}},null,8,j)])]),t("div",q,[t("div",F,[d(p,{to:`/course/${e==null?void 0:e.id}`,class:"card-title h5 mb-0"},{default:_(()=>[u(r(e==null?void 0:e.title),1)]),_:2},1032,["to"]),t("h6",O," #"+r(e.category),1)]),t("div",null,[t("p",z,[M,u(r(e.datetime),1)]),t("p",G,[J,u(r(e.total_quota),1)])]),e.price===e.origin_price?(c(),m("div",K,"NT$ "+r(o.numberComma(e.price)),1)):(c(),m("div",Q,[t("del",W,"原價 NT$ "+r(o.numberComma(e.origin_price)),1),t("div",X,"特價 NT$ "+r(o.numberComma(e.price)),1)]))])]),_:2},1032,["to"]),t("a",{class:n([{disabled:o.isDone===e.id},"btn btn-outline-primary me-4 mb-3 position-absolute bottom-0 end-0"]),onClick:et=>o.addToCart(e.id,o.qty)},"加入購物車",10,Y)]))),128))]),d(v,{class:"container mt-9",pages:i.page,onChangePage:a.getData},null,8,["pages","onChangePage"])])],64)}const nt=k(D,[["render",Z]]);export{nt as default};
