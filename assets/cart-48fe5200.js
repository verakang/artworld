import{H as n,I as r}from"./index-63b9cbb2.js";import{S as o}from"./sweetalert2.all-517d81ab.js";const{VITE_URL:s,VITE_PATH:i}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"artworld",BASE_URL:"/artworld/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},p=n("cart",{state:()=>({carts:[],loadingItem:"",final_total:"",total:"",isDone:""}),actions:{getCarts(){r.get(`${s}/v2/api/${i}/cart`).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total}).catch(t=>{o.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${t.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:1e3,timerProgressBar:!0,toast:!0})})},addToCart(t){this.isDone=t;const e={product_id:t,qty:1};r.post(`${s}/v2/api/${i}/cart`,{data:e}).then(()=>{this.isDone="",o.fire({position:"top-end",icon:"success",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:"已加入購物車！",showConfirmButton:!1,timer:800,timerProgressBar:!0,toast:!0}),this.getCarts()}).catch(a=>{o.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${a.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:800,timerProgressBar:!0,toast:!0})})},removeItem(t){this.loadingItem=t.id,r.delete(`${s}/v2/api/${i}/cart/${t.id}`).then(()=>{this.getCarts(),this.loadingItem="",o.fire({position:"top-end",icon:"success",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`已刪除 ${t.product.title}`,showConfirmButton:!1,timer:1e3,timerProgressBar:!0,toast:!0})}).catch(e=>{o.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${e.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:800,timerProgressBar:!0,toast:!0})})},deleteCart(){o.fire({position:"top-end",title:"確定清空購物車？",text:"此操作無法復原，請再次確認。",icon:"warning",showCancelButton:!0,confirmButtonColor:"#90ce67",cancelButtonColor:"#f74f4f",confirmButtonText:"確認刪除",cancelButtonText:"取消",toast:!0}).then(t=>{t.isConfirmed&&r.delete(`${s}/v2/api/${i}/carts`).then(()=>{o.fire({position:"top-end",icon:"success",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:"已清空購物車！",showConfirmButton:!1,timer:800,timerProgressBar:!0,toast:!0}),this.getCarts()}).catch(e=>{o.fire({position:"top-end",icon:"error",color:"white",iconColor:"white",customClass:{popup:"colored-toast"},title:`${e.response.data.message}，請再次確認。`,showConfirmButton:!1,timer:800,timerProgressBar:!0,toast:!0})})})},numberComma(t){let e=new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g");return t.toString().replace(e,",")}}});export{p as c};
